# Navigator æµè§ˆå™¨æ‰©å±•

å°† Navigator ä¸ªäººå¯¼èˆªç«™æ‰“åŒ…ä¸º Chrome/Edge æµè§ˆå™¨æ‰©å±•ï¼Œæ›¿æ¢é»˜è®¤æ–°æ ‡ç­¾é¡µã€‚

## åŠŸèƒ½ç‰¹æ€§

âœ¨ **æ–°æ ‡ç­¾é¡µæ›¿æ¢**ï¼šæ‰“å¼€æ–°æ ‡ç­¾å³å¯è®¿é—®ä½ çš„å¯¼èˆªç«™
ğŸ“š **ä¹¦ç­¾åŒæ­¥**ï¼šä½¿ç”¨æµè§ˆå™¨åŸç”Ÿä¹¦ç­¾ API
ğŸ¨ **ç¾è§‚å¸ƒå±€**ï¼šç½‘æ ¼å¡ç‰‡å¼è®¾è®¡ï¼Œæ‹–æ‹½æ’åº
ğŸ¤– **AI å¢å¼º**ï¼šæ™ºèƒ½è·å–ç½‘é¡µå…ƒæ•°æ®ã€è‡ªåŠ¨åˆ†ç±»æ¨è
ğŸ’¾ **æœ¬åœ°å­˜å‚¨**ï¼šæ‰€æœ‰æ•°æ®å­˜å‚¨åœ¨æµè§ˆå™¨æœ¬åœ°ï¼Œéšç§å®‰å…¨

## ç›®å½•ç»“æ„

```
extension/
â”œâ”€â”€ manifest.json           # æ‰©å±•é…ç½®æ–‡ä»¶ (Manifest V3)
â”œâ”€â”€ index.html             # æ–°æ ‡ç­¾é¡µå…¥å£
â”œâ”€â”€ icons/                 # æ‰©å±•å›¾æ ‡
â”‚   â”œâ”€â”€ icon-16.png        # å·¥å…·æ å›¾æ ‡
â”‚   â”œâ”€â”€ icon-48.png        # æ‰©å±•ç®¡ç†é¡µ
â”‚   â””â”€â”€ icon-128.png       # Chrome Web Store
â”œâ”€â”€ public/                # é™æ€èµ„æº
â””â”€â”€ vite.config.ts         # æ„å»ºé…ç½®
```

## å¼€å‘å‘½ä»¤

```bash
# å¼€å‘æ¨¡å¼ï¼ˆè‡ªåŠ¨é‡æ„å»ºï¼‰
npm run dev:ext

# ç”Ÿäº§æ„å»º
npm run build:ext

# æ‰“åŒ…ä¸º .zipï¼ˆç”¨äºå•†åº—å‘å¸ƒï¼‰
npm run pack:ext
```

## å®‰è£…æ­¥éª¤

### 1. æ„å»ºæ‰©å±•

```bash
npm run build:ext
```

æ„å»ºè¾“å‡ºä½äº `dist-extension/` ç›®å½•ã€‚

### 2. åŠ è½½æ‰©å±•ï¼ˆå¼€å‘è€…æ¨¡å¼ï¼‰

#### Chrome/Edge

1. æ‰“å¼€ `chrome://extensions/`ï¼ˆæˆ– `edge://extensions/`ï¼‰
2. å¯ç”¨å³ä¸Šè§’"**å¼€å‘è€…æ¨¡å¼**"
3. ç‚¹å‡»"**åŠ è½½å·²è§£å‹çš„æ‰©å±•ç¨‹åº**"
4. é€‰æ‹© `dist-extension/` æ–‡ä»¶å¤¹
5. æ‰©å±•åŠ è½½æˆåŠŸï¼

#### éªŒè¯å®‰è£…

- æ‰“å¼€æ–°æ ‡ç­¾é¡µï¼Œåº”æ˜¾ç¤º Navigator ç•Œé¢
- å·¥å…·æ åº”æ˜¾ç¤ºæ‰©å±•å›¾æ ‡

### 3. æ›´æ–°æ‰©å±•

ä¿®æ”¹ä»£ç åï¼š

```bash
npm run build:ext  # é‡æ–°æ„å»º
```

ç„¶ååœ¨ `chrome://extensions/` ç‚¹å‡»æ‰©å±•çš„"**åˆ·æ–°**"æŒ‰é’®ã€‚

## æƒé™è¯´æ˜

æ‰©å±•éœ€è¦ä»¥ä¸‹æƒé™ï¼ˆåœ¨ `manifest.json` ä¸­å®šä¹‰ï¼‰ï¼š

| æƒé™ | ç”¨é€” |
|------|------|
| `storage` | å­˜å‚¨ç”¨æˆ·é…ç½®å’Œæ•°æ® |
| `bookmarks` | è¯»å–æµè§ˆå™¨ä¹¦ç­¾ï¼ˆå¯é€‰åŠŸèƒ½ï¼‰ |
| `tabs` | ç®¡ç†æ ‡ç­¾é¡µæ“ä½œ |

æ‰€æœ‰æ•°æ®ä»…å­˜å‚¨åœ¨æœ¬åœ°ï¼Œä¸ä¼šä¸Šä¼ åˆ°ä»»ä½•æœåŠ¡å™¨ã€‚

## æŠ€æœ¯æ ˆ

- **æ¡†æ¶**ï¼šVue 3.4 + TypeScript 5.9
- **UI**ï¼šNaive UI 2.38
- **çŠ¶æ€ç®¡ç†**ï¼šPinia 2.1
- **æ„å»ºå·¥å…·**ï¼šVite 5.0 + @crxjs/vite-plugin 2.2
- **æ‰©å±•æ ‡å‡†**ï¼šManifest V3

## é…ç½®æ–‡ä»¶è¯´æ˜

### manifest.json

```json
{
  "manifest_version": 3,           // Manifest V3 æ ‡å‡†
  "name": "Navigator",             // æ‰©å±•åç§°
  "version": "0.1.0",              // ç‰ˆæœ¬å·
  "chrome_url_overrides": {        // æ›¿æ¢æ–°æ ‡ç­¾é¡µ
    "newtab": "index.html"
  },
  "permissions": ["storage", ...], // æƒé™ç”³è¯·
  "icons": { ... }                 // å›¾æ ‡é…ç½®
}
```

### vite.config.extension.ts

å…³é”®é…ç½®ï¼š

```typescript
import { crx } from '@crxjs/vite-plugin'
import manifest from './extension/manifest.json'

export default defineConfig({
  plugins: [
    vue(),
    crx({ manifest })  // CRX æ’ä»¶è‡ªåŠ¨å¤„ç† Manifest V3
  ],
  build: {
    outDir: 'dist-extension',
    // ç¦ç”¨ console/debuggerï¼ˆç”Ÿäº§ç¯å¢ƒï¼‰
    terserOptions: {
      compress: {
        drop_console: true,
        drop_debugger: true
      }
    }
  }
})
```

## å¸¸è§é—®é¢˜

### Q: æ‰©å±•åŠ è½½å¤±è´¥ï¼Ÿ

**A**: æ£€æŸ¥ä»¥ä¸‹å‡ ç‚¹ï¼š
1. ç¡®ä¿ `dist-extension/manifest.json` å­˜åœ¨
2. ç¡®è®¤å›¾æ ‡æ–‡ä»¶è·¯å¾„æ­£ç¡®
3. æŸ¥çœ‹ Chrome æ‰©å±•é¡µé¢çš„é”™è¯¯æç¤º

### Q: ä¿®æ”¹ä»£ç åæ‰©å±•æœªæ›´æ–°ï¼Ÿ

**A**: å¼€å‘æµç¨‹ï¼š
```bash
# 1. ä¿®æ”¹ä»£ç 
# 2. é‡æ–°æ„å»º
npm run build:ext
# 3. åœ¨æ‰©å±•é¡µé¢ç‚¹å‡»"åˆ·æ–°"æŒ‰é’®
```

### Q: å¦‚ä½•è°ƒè¯•æ‰©å±•ï¼Ÿ

**A**:
- **æ–°æ ‡ç­¾é¡µ**ï¼šç›´æ¥æŒ‰ F12 æ‰“å¼€å¼€å‘è€…å·¥å…·
- **åå°è„šæœ¬**ï¼šåœ¨æ‰©å±•é¡µé¢ç‚¹å‡»"æ£€æŸ¥è§†å›¾"

### Q: æ‰©å±•ä½“ç§¯ä¼˜åŒ–ï¼Ÿ

**A**:
- ä½¿ç”¨ `npm run build:ext` ç”Ÿäº§æ„å»º
- è‡ªåŠ¨å¼€å¯ tree-shaking å’Œä»£ç åˆ†å‰²
- è‡ªåŠ¨ç§»é™¤ console å’Œ debugger

## å‘å¸ƒåˆ°å•†åº—

### å‡†å¤‡å·¥ä½œ

1. **åˆ›å»ºé«˜è´¨é‡å›¾æ ‡**ï¼ˆè§ `icons/README.md`ï¼‰
2. **å‡†å¤‡å®£ä¼ å›¾**ï¼š
   - æˆªå›¾ 1280Ã—800ï¼ˆè‡³å°‘ 1 å¼ ï¼‰
   - å®£ä¼ å›¾ 440Ã—280ï¼ˆå¯é€‰ï¼‰
3. **æ’°å†™å•†åº—æè¿°**ï¼š
   - ç®€çŸ­æè¿°ï¼ˆ132 å­—ç¬¦å†…ï¼‰
   - è¯¦ç»†æè¿°ï¼ˆåŠŸèƒ½ã€ç‰¹æ€§ï¼‰

### æ‰“åŒ…å‘å¸ƒ

```bash
npm run pack:ext
```

ç”Ÿæˆ `navigator-extension.zip`ï¼Œä¸Šä¼ è‡³ï¼š

- **Chrome Web Store**ï¼šhttps://chrome.google.com/webstore/devconsole
- **Edge Add-ons**ï¼šhttps://partner.microsoft.com/dashboard/microsoftedge

### å®¡æ ¸è¦ç‚¹

- âœ… æƒé™è¯´æ˜æ¸…æ™°ï¼ˆéšç§æ”¿ç­–ï¼‰
- âœ… å›¾æ ‡å’Œæˆªå›¾ç¬¦åˆè§„èŒƒ
- âœ… åŠŸèƒ½æè¿°å‡†ç¡®æ— è¯¯
- âœ… é€šè¿‡ Content Security Policy æ£€æŸ¥

## å¼€å‘è·¯çº¿å›¾

- [x] åŸºç¡€æ‰©å±•ç»“æ„
- [x] æ–°æ ‡ç­¾é¡µæ›¿æ¢
- [x] Manifest V3 é€‚é…
- [ ] æµè§ˆå™¨ä¹¦ç­¾åŒæ­¥
- [ ] è·¨æµè§ˆå™¨å…¼å®¹ï¼ˆFirefoxï¼‰
- [ ] äº‘åŒæ­¥åŠŸèƒ½ï¼ˆå¯é€‰ï¼‰

## ç›¸å…³æ–‡æ¡£

- [Chrome Extension Manifest V3](https://developer.chrome.com/docs/extensions/mv3/)
- [@crxjs/vite-plugin æ–‡æ¡£](https://crxjs.dev/vite-plugin)
- [Naive UI ç»„ä»¶åº“](https://www.naiveui.com/)

## è®¸å¯è¯

ä¸ä¸»é¡¹ç›®ç›¸åŒã€‚
